title Cloud-based provisioning over ssh

participant User
participant "Provisioned Instance" as Host
participant "Foreman" as Foreman
participant "Foreman Proxy" as Proxy
participant "Infrastructure Cloud" as Cloud
participant DNS

autonumber

note over Foreman:has an Image with credentials defined in Compute Resource
User->Foreman:clicks on New Host
User-[#288A01]>Foreman:selects cloud resource, the image and submits
Foreman-[#288A01]>Cloud:creates new instance
Cloud-[#288A01]>Foreman:reports IP address
Foreman->Proxy:creates DNS records
Proxy->DNS:forwards DNS records
Foreman-[#288A01]>Cloud:starts the instance
note over Host:boots up
Foreman-[#288A01]>Host:executes finish script via ssh
note over Host:puppet bootstrap

== Finish script ==

note over Host:build mode is turned off

