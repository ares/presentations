title Cloud-based provisioning via cloud-init

participant User
participant "Provisioned Instance" as Host
participant "Foreman" as Foreman
participant "Foreman Proxy" as Proxy
participant "Infrastructure Cloud" as Cloud
participant DNS

autonumber

note over Foreman:has an Image with cloud-init flag
User->Foreman:clicks on New Host
User-[#288A01]>Foreman:selects cloud resource, the image and submits
Foreman-[#288A01]>Cloud:creates new instance with cloud-init info
Cloud-[#288A01]>Foreman:reports IP address
Foreman->Proxy:creates DNS records
Proxy->DNS:forwards DNS records
Foreman->Cloud:starts the instance
note over Host:boots up

== Cloud-init script ==

note over Host:puppet bootstrap
Host-[#288A01]>Foreman:turns off build mode
